/**
 * UMC Angular Google Analytics - Easy tracking for your AngularJS application
 * @version v0.1.5 - 2014-11-10
 * @link http://github.com/laffer1/angular-google-analytics
 * @author Julien Bouquillon <julien@revolunet.com>,Luke Palnau <lpalnau@umich.edu>,Lucas Holt <lholt@umich.edu>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("umc-angular-google-analytics",[]).provider("Analytics",function(){"use strict";var a,b,c=!1,d=!0,e="",f="analytics.js",g="$routeChangeSuccess",h=!1,i=!1;this._logs=[],this.setAccount=function(b){return a=b,!0},this.trackPages=function(a){return d=a,!0},this.trackPrefix=function(a){return e=a,!0},this.setDomainName=function(a){return b=a,!0},this.setFilename=function(a){return f=a,!0},this.setPageEvent=function(a){return g=a,!0},this.trackEcommerce=function(a){return h=a,!0},this.$get=["$document","$rootScope","$location","$window",function(j,k,l,m){this._createScriptTag=function(){if(a){m.GoogleAnalyticsObject="__gaTracker",angular.isUndefined(m.__gaTracker)&&(m.__gaTracker=function(){angular.isUndefined(m.__gaTracker.q)&&(m.__gaTracker.q=[]),m.__gaTracker.q.push(arguments)},m.__gaTracker.l=1*new Date);var e={};b&&(e.cookieDomain=b),m.__gaTracker("create",a),h&&!i&&(m.__gaTracker("require","ecommerce","ecommerce.js"),i=!0),d&&this._trackPage(l.path(),k.pageTitle),function(){var a=j[0].createElement("script");a.type="text/javascript",a.async=!0,a.src="//www.google-analytics.com/"+f;var b=j[0].getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),c=!0}},this._log=function(){this._logs.push(arguments)},this._trackPage=function(a,b){if(!angular.isUndefined(m.__gaTracker)){angular.isUndefined(a)&&(a=l.path());var c=e+a;""!==c&&"/"!==c.charAt(0)&&(c="/"+c);var d={page:c};angular.isUndefined(b)&&angular.isDefined(k.pageTitle)&&(b=k.pageTitle),angular.isDefined(b)&&""!==b&&(d.title=b),m.__gaTracker("send","pageview",d),this._log("pageview",arguments)}},this._trackEvent=function(a,b,c,d){angular.isUndefined(m.__gaTracker)||(m.__gaTracker("send","event",{eventCategory:a,eventAction:b,eventLabel:c,eventValue:d}),this._log("event",arguments))},this._addTrans=function(a,b,c,d,e){angular.isUndefined(m.__gaTracker)||(h&&!i&&(m.__gaTracker("require","ecommerce","ecommerce.js"),i=!0),m.__gaTracker("ecommerce:addTransaction",{id:a,affiliation:b,revenue:c,shipping:e,tax:d}),this._log("ecommerce:addTransaction",arguments))},this._addItem=function(a,b,c,d,e,f){angular.isUndefined(m.__gaTracker)||(m.__gaTracker("ecommerce:addItem",{id:a,name:b,sku:c,category:d,price:e,quantity:f}),this._log("ecommerce:addItem",arguments))},this._trackTrans=function(){angular.isUndefined(m.__gaTracker)||(m.__gaTracker("ecommerce:send"),this._log("ecommerce:send",arguments))},this._clearTrans=function(){angular.isUndefined(m.__gaTracker)||(m.__gaTracker("ecommerce:clear"),this._log("ecommerce:clear",arguments))},this._trackSocial=function(a,b,c){angular.isUndefined(m.__gaTracker)||(m.__gaTracker("send","social",{socialNetwork:a,socialAction:b,socialTarget:c}),this._log("trackSocial",arguments))},this._createScriptTag();var n=this;return d&&k.$on(g,function(){n._trackPage(l.path(),k.pageTitle)}),{_logs:n._logs,trackPage:function(a,b){n._trackPage(a,b)},trackEvent:function(a,b,c,d){n._trackEvent(a,b,c,d)},addTrans:function(a,b,c,d,e){n._addTrans(a,b,c,d,e)},addItem:function(a,b,c,d,e,f){n._addItem(a,c,b,d,e,f)},trackTrans:function(){n._trackTrans()},clearTrans:function(){n._clearTrans()},trackSocial:function(a,b,c){n._trackSocial(a,b,c)},ga:function(){angular.isDefined(m.__gaTracker)&&m.__gaTracker(arguments)}}}]});